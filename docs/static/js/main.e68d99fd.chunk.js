(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{60:function(e,t,n){e.exports=n(82)},82:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(23),o=n.n(c),u=n(37),s=n(26),l=n(83),i=n(84),d=n(85),m=n(105),p=n(86),f=n(87),v=n(88),b=n(18),h=Object(b.b)(function(e){return{}},function(e){return{}})(function(e){return r.createElement(l.a,{color:"light",light:!0,expand:"md"},r.createElement(i.a,{tag:u.b,to:"/"},"Problem Pool [beta]"),r.createElement(d.a,{className:"ml-auto",navbar:!0},r.createElement(m.a,{nav:!0,inNavbar:!0},r.createElement(p.a,{nav:!0,caret:!0},'"Settings"'),r.createElement(f.a,{right:!0},r.createElement(v.a,{tag:u.b,to:"./settings"},"User IDs"))),r.createElement(m.a,{nav:!0,inNavbar:!0},r.createElement(p.a,{nav:!0,caret:!0},"Links"),r.createElement(f.a,{right:!0},r.createElement(v.a,{href:"https://github.com/kenkoooo/problem-pool",target:"_blank"},"GitHub"),r.createElement(v.a,{href:"https://onlinejudge.u-aizu.ac.jp/",target:"_blank"},"AOJ"),r.createElement(v.a,{href:"https://atcoder.jp/",target:"_blank"},"AtCoder"),r.createElement(v.a,{href:"https://codeforces.com/",target:"_blank"},"Codeforces"),r.createElement(v.a,{href:"https://yukicoder.me/",target:"_blank"},"yukicoder")))))}),E=n(103),g=n(27),j=n(28),k=n(32),O=n(29),y=n(33),S=n(89),w=n(90),I=n(91),x=n(92),C=n(58),A="SAVE_USER_IDS",R=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={atcoder:e.userIds.atcoder,yukicoder:e.userIds.yukicoder,codeforces:e.userIds.codeforces,aoj:e.userIds.aoj},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.atcoder,a=t.codeforces,c=t.yukicoder,o=t.aoj,u=n===this.props.userIds.atcoder&&a===this.props.userIds.codeforces&&c===this.props.userIds.yukicoder&&o===this.props.userIds.aoj;return r.createElement("div",null,r.createElement(S.a,null,r.createElement(w.a,null,r.createElement(I.a,null,"AtCoder ID"),r.createElement(x.a,{onChange:function(t){return e.setState({atcoder:t.target.value})},type:"text",placeholder:"AtCoder ID",value:n}))),r.createElement(S.a,null,r.createElement(w.a,null,r.createElement(I.a,null,"AOJ ID"),r.createElement(x.a,{onChange:function(t){return e.setState({aoj:t.target.value})},type:"text",placeholder:"AOJ ID",value:o}))),r.createElement(S.a,null,r.createElement(w.a,null,r.createElement(I.a,null,"yukicoder ID"),r.createElement(x.a,{onChange:function(t){return e.setState({yukicoder:t.target.value})},type:"text",placeholder:"yukicoder ID",value:c}))),r.createElement(S.a,null,r.createElement(w.a,null,r.createElement(I.a,null,"Codeforces ID"),r.createElement(x.a,{onChange:function(t){return e.setState({codeforces:t.target.value})},type:"text",placeholder:"Codeforces ID",value:a}))),r.createElement(S.a,null,u?r.createElement(C.a,{disabled:!0},"Saved"):r.createElement(C.a,{color:"danger",onClick:function(){return e.props.save({atcoder:n,codeforces:a,yukicoder:c,aoj:o})}},"Save")))}}]),t}(r.Component),D=Object(b.b)(function(e){return{userIds:e.userIds}},function(e){return{save:function(t){return e(function(e){return{type:A,userIds:e}}(t))}}})(R),T=n(102),M=n(93),_=n(94),U=n(96),N=n(95),J=n(97),L=n(98),B=n(104),z=n(99),K=n(100),F=n(101),V=function(e){var t=new Date(1e3*e),n=t.getFullYear(),r=("0"+(t.getMonth()+1)).slice(-2),a=("0"+t.getDate()).slice(-2);return"".concat(n,"-").concat(r,"-").concat(a)},P=function(e){return 24*e*3600},G=function(e){var t=parseInt(e.slice(0,4)),n=parseInt(e.slice(5,7)),r=parseInt(e.slice(8,10)),a=new Date;return a.setFullYear(t),a.setMonth(n-1),a.setDate(r),a.getTime()/1e3},H=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={modalSolvedDate:null,modalReviewDate:null,isModalOpen:!1,modalType:"Remove"},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.isModalOpen,a=t.modalType,c=t.modalSolvedDate,o=t.modalReviewDate,u=Date.now()/1e3,s=this.props,l=s.title,i=s.url,d=s.taskKey,m=s.lastJudgeAccepted,p=s.lastSolvedByUser,f=s.nextReviewTime,v=s.judge,b="Remove"!==a?function(e,t){var n=Date.now()/1e3,r=e?n-e:0;switch(t){case"Solved":return Math.max(2*r,P(4))+n;case"Good":return Math.max(r,P(4))+n;case"Hard":return Math.max(r/2,P(4))+n;case"Failed":return P(4)+n}}(p,a):-1,h=null!==c?c:V(u),E=null!==o?o:V(b),g=V(u)>=V(f);return r.createElement(M.a,null,r.createElement(_.a,null,r.createElement(N.a,null,l&&i&&v?r.createElement("div",null,r.createElement(U.a,null,v)," ",r.createElement("a",{href:i,target:"_blank"},l)):d),r.createElement(J.a,null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("th",{scope:"row"},"Next review"),g?r.createElement("td",{style:{color:"red"}},r.createElement("strong",null," ",V(f))):r.createElement("td",null,V(f))),void 0!==p?r.createElement("tr",null,r.createElement("th",{scope:"row"},"Last solved"),r.createElement("td",null,V(p))):null,void 0!==m?r.createElement("tr",null,r.createElement("th",{scope:"row"},"Last accepted"),r.createElement("td",null,V(m))):null)),r.createElement(L.a,{className:"d-flex justify-content-end"},r.createElement(C.a,{key:"solved",color:"success",onClick:function(){return e.setState({isModalOpen:!0,modalType:"Solved"})}},"Solved"),r.createElement(C.a,{key:"good",onClick:function(){return e.setState({isModalOpen:!0,modalType:"Good"})}},"Good"),r.createElement(C.a,{key:"hard",color:"warning",onClick:function(){return e.setState({isModalOpen:!0,modalType:"Hard"})}},"Hard"),r.createElement(C.a,{key:"failed",color:"danger",onClick:function(){return e.setState({isModalOpen:!0,modalType:"Failed"})}},"Failed"),r.createElement(C.a,{key:"remove",color:"dark",onClick:function(){return e.setState({isModalOpen:!0,modalType:"Remove"})}},"Remove")),r.createElement(B.a,{isOpen:n,toggle:function(){return e.setState({isModalOpen:!n})}},"Remove"===a?r.createElement("div",null,r.createElement(z.a,null,"Remove this card?"),r.createElement(K.a,null,l||d),r.createElement(F.a,null,r.createElement(C.a,{onClick:function(){e.setState({isModalOpen:!1}),e.props.remove()}},"Remove"),r.createElement(C.a,{onClick:function(){return e.setState({isModalOpen:!1})}},"Cancel"))):r.createElement("div",null,r.createElement(z.a,null,"Next review will be ..."),r.createElement(K.a,null,r.createElement(w.a,null,r.createElement(I.a,null,"Solved:"),r.createElement(x.a,{type:"date",value:h,onChange:function(t){return e.setState({modalSolvedDate:t.target.value})}})),r.createElement(I.a,null,"Next Review:"),r.createElement(x.a,{type:"date",value:E,onChange:function(t){return e.setState({modalReviewDate:t.target.value})}})),r.createElement(F.a,null,r.createElement(C.a,{onClick:function(){e.setState({isModalOpen:!1});var t=G(h),n=G(E);e.props.review(t,n)}},"Submit"),r.createElement(C.a,{onClick:function(){return e.setState({isModalOpen:!1})}},"Cancel"))))))}}]),t}(r.Component),q="CREATE_TASK",Y="DELETE_TASK",W="UPDATE_TASK",Q=Object(b.b)(function(e){return{tasks:e.tasks,submissions:e.submissions,problems:e.problems}},function(e){return{remove:function(t){return e(function(e){return{type:Y,key:e}}(t))},solve:function(t,n,r){return e(function(e,t,n){return{type:W,key:e,solvedSecond:t,nextReviewSecond:n}}(t,n,r))}}})(function(e){return r.createElement("div",null,e.tasks.valueSeq().sort(function(e,t){return e.nextReviewTime-t.nextReviewTime}).map(function(t){var n=t.validUrl?e.problems.get(t.validUrl):void 0,a=t.lastJudgeAccepted,c=t.lastSolvedByUser,o=t.nextReviewTime;return r.createElement(S.a,{key:t.key},r.createElement(T.a,null,r.createElement(H,{taskKey:t.key,url:t.validUrl,title:n?n.title:null,lastJudgeAccepted:a,lastSolvedByUser:c,nextReviewTime:o,remove:function(){return e.remove(t.key)},review:function(n,r){return e.solve(t.key,n,r)},judge:n?n.judge:null})))}))}),X=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).setSuggestions=function(e){var t=e.toLocaleLowerCase().split(" ").filter(function(e){return e.length>0});if(t.length>0){var r=n.props.problems.valueSeq().filter(function(e){var n=(e.title+" "+e.url+" "+e.judge).toLocaleLowerCase();return t.every(function(e){return-1!==n.indexOf(e)})}).slice(0,10).toArray();n.setState({suggestions:r,focusing:-1})}else n.setState({suggestions:[],focusing:-1})},n.submit=function(e){n.props.submit(e),n.setState({input:"",suggestions:[],focusing:-1})},n.state={input:"",suggestions:[],focusing:-1},n}return Object(y.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.suggestions,a=t.focusing,c=this.props.submissions,o=function(e){var t=c.get(e.url);return void 0!==t&&void 0!==t.find(function(e){return"Accepted"===e.result})};return r.createElement("div",null,r.createElement(S.a,null,r.createElement(T.a,null,r.createElement(x.a,{onKeyDown:function(t){"Enter"===t.key?0<=a&&a<n.length?e.submit(n[a].url):e.submit(e.state.input):"ArrowDown"===t.key?e.setState({focusing:Math.min(a+1,n.length-1)}):"ArrowUp"===t.key&&e.setState({focusing:Math.max(a-1,-1)})},type:"text",onChange:function(t){var n=t.target.value;e.setState({input:n}),e.setSuggestions(n)},value:this.state.input}))),r.createElement(S.a,null,r.createElement(T.a,null,r.createElement(M.a,null,this.state.suggestions.map(function(t,n){return r.createElement(_.a,{color:o(t)?"success":void 0,active:n===a,key:t.url,onClick:function(){return e.submit(t.url)},action:!0},t.title," ",r.createElement(U.a,{pill:!0},t.judge))})))),r.createElement(Q,null))}}]),t}(r.Component),Z=Object(b.b)(function(e){return{problems:e.problems,submissions:e.submissions}},function(e){return{submit:function(t){return e({type:q,input:t})}}})(X),$=function(){return r.createElement(u.a,null,r.createElement(h,null),r.createElement(E.a,null,r.createElement(s.c,null,r.createElement(s.a,null,r.createElement(s.a,{exact:!0,path:"/",component:Z}),r.createElement(s.a,{exact:!0,path:"/settings",component:D})))))},ee=(n(80),n(15)),te=n.n(ee),ne=n(14),re=n(12),ae=function(e){return fetch("https://kenkoooo.com/atcoder/atcoder-api/results?user=".concat(e)).then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.map(function(e){return{url:"https://atcoder.jp/contests/".concat(e.contest_id,"/submissions/").concat(e.id),userId:e.user_id,result:"AC"===e.result?"Accepted":"Rejected",problemUrl:"https://atcoder.jp/contests/".concat(e.contest_id,"/tasks/").concat(e.problem_id),creationTimeSecond:e.epoch_second}}))})},ce=function(){return fetch("https://kenkoooo.com/atcoder/resources/problems.json").then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.map(function(e){return{url:"https://atcoder.jp/contests/".concat(e.contest_id,"/tasks/").concat(e.id),title:e.title,judge:"AtCoder"}}))})},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5;return fetch("https://codeforces.com/api/user.status?handle=".concat(e,"&from=").concat(t,"&count=").concat(n)).then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.result.map(function(e){return{url:"https://codeforces.com/contest/".concat(e.problem.contestId,"/submission/").concat(e.id),userId:e.author.members[0].handle,result:"OK"===e.verdict?"Accepted":"Rejected",problemUrl:"https://codeforces.com/contest/".concat(e.problem.contestId,"/problem/").concat(e.problem.index),creationTimeSecond:e.creationTimeSecond}}))})},ue=function(){return fetch("https://codeforces.com/api/problemset.problems").then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.result.problems.map(function(e){return{url:"https://codeforces.com/contest/".concat(e.contestId,"/problem/").concat(e.index),title:e.name,judge:"Codeforces"}}))})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return fetch("https://judgeapi.u-aizu.ac.jp/problems?page=".concat(e,"&size=").concat(t)).then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.map(function(e){return{url:"https://onlinejudge.u-aizu.ac.jp/problems/".concat(e.id),title:"".concat(e.id,": ").concat(e.name),judge:"AOJ"}}))})},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5;return fetch("https://judgeapi.u-aizu.ac.jp/solutions/users/".concat(e,"?page=").concat(t,"&size=").concat(n)).then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.map(function(e){return{url:"https://onlinejudge.u-aizu.ac.jp/solutions/problem/".concat(e.problemId,"/review/").concat(e.judgeId,"/").concat(e.userId,"/").concat(e.language),problemUrl:"https://onlinejudge.u-aizu.ac.jp/problems/".concat(e.problemId),userId:e.userId,result:"Accepted",creationTimeSecond:e.submissionDate/1e3}}))})},ie=function(){return fetch("https://yukicoder.me/api/v1/problems").then(function(e){return e.json()}).then(function(e){return Object(re.a)(e.map(function(e){return{url:"https://yukicoder.me/problems/no/".concat(e.No),title:"No.".concat(e.No," ").concat(e.Title),judge:"yukicoder"}}))})},de=function(e){return fetch("https://yukicoder.me/api/v1/solved/name/".concat(e)).then(function(e){return e.json()}).then(function(t){return Object(re.a)(t.map(function(t){return{url:"https://yukicoder.me/problems/no/".concat(t.No),userId:e,result:"Accepted",problemUrl:"https://yukicoder.me/problems/no/".concat(t.No),creationTimeSecond:void 0}}))})},me=function(e){return{type:"RECEIVE_PROBLEMS",problems:e}},pe=function(e){return{type:"RECEIVE_SUBMISSIONS",submissions:e}},fe=te.a.mark(be),ve=te.a.mark(he);function be(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[ce,ue,se,ie],t.next=3,Object(ne.a)(e.map(function(e){return Object(ne.b)(te.a.mark(function t(){var n;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ne.b)(e);case 3:return n=t.sent,t.next=6,Object(ne.c)(me(n));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to fetch problems. "+t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))}));case 3:case"end":return t.stop()}},fe)}function he(){var e,t;return te.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ne.d)(function(e){return e.userIds});case 2:return e=n.sent,t=[{f:ae,id:e.atcoder},{f:oe,id:e.codeforces},{f:le,id:e.aoj},{f:de,id:e.yukicoder}],n.next=6,Object(ne.a)(t.filter(function(e){return e.id.length>0}).map(function(e){return Object(ne.b)(te.a.mark(function t(){var n;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ne.b)(e.f,e.id);case 3:return n=t.sent,t.next=6,Object(ne.c)(pe(n));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to fetch submissions. "+t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))}));case 6:case"end":return n.stop()}},ve)}var Ee=function(e){var t=je(e);localStorage.setItem("SAVE_DATA",JSON.stringify(t))},ge=function(e){try{var t=JSON.parse(e);return{userIds:t.userIds,tasks:Object(re.b)(t.tasks)}}catch(n){return void console.error(n)}},je=function(e){return{tasks:e.tasks,userIds:e.userIds}},ke=te.a.mark(Oe);function Oe(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ne.d)(function(e){return e});case 2:return e=t.sent,t.next=5,Object(ne.b)(Ee,e);case 5:case"end":return t.stop()}},ke)}var ye=te.a.mark(Ie),Se=te.a.mark(xe),we=te.a.mark(Ce);function Ie(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)(A,he);case 2:case"end":return e.stop()}},ye)}function xe(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.e)([q,Y,W,A],Oe);case 2:case"end":return e.stop()}},Se)}function Ce(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)([Object(ne.b)(xe),Object(ne.b)(be),Object(ne.b)(Ie)]);case 2:case"end":return e.stop()}},we)}var Ae=Ce,Re=n(59),De=n(25),Te=n(47),Me=function(e){try{return new URL(e),!0}catch(t){return!1}},_e=function(){var e=function(){var e=localStorage.getItem("SAVE_DATA");return null===e?void 0:ge(e)}();if(void 0===e){var t=localStorage.getItem("TASKS");return{tasks:t?Object(re.b)(JSON.parse(t)):Object(re.b)(),userIds:{atcoder:"",codeforces:"",aoj:"",yukicoder:""},submissions:Object(re.b)(),problems:Object(re.b)()}}return Object(Te.a)({submissions:Object(re.b)(),problems:Object(re.b)()},e)},Ue=function(e,t){switch(t.type){case q:var n=function(e){var t=Me(e)?e:void 0,n=Date.now()/1e3;return{key:e,validUrl:t,createdAt:n,nextReviewTime:n,lastJudgeAccepted:void 0,lastSolvedByUser:void 0}}(t.input);return e.has(n.key)?e:e.set(n.key,n);case Y:var r=t.key;return e.remove(r);case W:var a=t.key,c=t.solvedSecond,o=t.nextReviewSecond,u=e.get(a);if(void 0===u)return e;var s=Object(Te.a)({},u,{lastSolvedByUser:c,nextReviewTime:o});return e.set(a,s);default:return e}},Ne=function(e,t){switch(t.type){case A:return t.userIds;default:return e}},Je=function(e,t){switch(t.type){case"RECEIVE_PROBLEMS":return e.merge(t.problems.map(function(e){return[e.url,e]}));default:return e}},Le=function(e,t){switch(t.type){case"RECEIVE_SUBMISSIONS":var n=t.submissions.reduce(function(e,t){return e.update(t.problemUrl,Object(re.a)(),function(e){return e.push(t)})},Object(re.b)());return e.mergeWith(function(e,t){return e.merge(t)},n);default:return e}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e(),t=arguments.length>1?arguments[1]:void 0;return console.log(t),{tasks:Ue(e.tasks,t),userIds:Ne(e.userIds,t),submissions:Le(e.submissions,t),problems:Je(e.problems,t)}},ze=Object(Re.a)(),Ke=Object(De.d)(Be,Object(De.c)(Object(De.a)(ze)));ze.run(Ae),o.a.render(a.a.createElement(b.a,{store:Ke},a.a.createElement($,null)),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.e68d99fd.chunk.js.map